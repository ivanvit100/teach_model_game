var J=Object.defineProperty;var Q=(e,u,t)=>u in e?J(e,u,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[u]=t;var C=(e,u,t)=>Q(e,typeof u!="symbol"?u+"":u,t);(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(n){if(n.ep)return;n.ep=!0;const c=t(n);fetch(n.href,c)}})();function A(){}function z(e){return e()}function P(){return Object.create(null)}function L(e){e.forEach(z)}function K(e){return typeof e=="function"}function X(e,u){return e!=e?u==u:e!==u||e&&typeof e=="object"||typeof e=="function"}let F;function Y(e,u){return e===u?!0:(F||(F=document.createElement("a")),F.href=u,e===F.href)}function Z(e){return Object.keys(e).length===0}function d(e,u){e.appendChild(u)}function U(e,u,t){e.insertBefore(u,t||null)}function N(e){e.parentNode&&e.parentNode.removeChild(e)}function ee(e,u){for(let t=0;t<e.length;t+=1)e[t]&&e[t].d(u)}function _(e){return document.createElement(e)}function V(e){return document.createTextNode(e)}function b(){return V(" ")}function g(e,u,t){t==null?e.removeAttribute(u):e.getAttribute(u)!==t&&e.setAttribute(u,t)}function ue(e){return Array.from(e.childNodes)}let T;function M(e){T=e}function te(){if(!T)throw new Error("Function called outside component initialization");return T}function ne(e){te().$$.on_mount.push(e)}const x=[],k=[];let D=[];const H=[],ie=Promise.resolve();let O=!1;function re(){O||(O=!0,ie.then(W))}function I(e){D.push(e)}const S=new Set;let B=0;function W(){if(B!==0)return;const e=T;do{try{for(;B<x.length;){const u=x[B];B++,M(u),se(u.$$)}}catch(u){throw x.length=0,B=0,u}for(M(null),x.length=0,B=0;k.length;)k.pop()();for(let u=0;u<D.length;u+=1){const t=D[u];S.has(t)||(S.add(t),t())}D.length=0}while(x.length);for(;H.length;)H.pop()();O=!1,S.clear(),M(e)}function se(e){if(e.fragment!==null){e.update(),L(e.before_update);const u=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,u),e.after_update.forEach(I)}}function oe(e){const u=[],t=[];D.forEach(i=>e.indexOf(i)===-1?u.push(i):t.push(i)),t.forEach(i=>i()),D=u}const ce=new Set;function le(e,u){e&&e.i&&(ce.delete(e),e.i(u))}function R(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ae(e,u,t){const{fragment:i,after_update:n}=e.$$;i&&i.m(u,t),I(()=>{const c=e.$$.on_mount.map(z).filter(K);e.$$.on_destroy?e.$$.on_destroy.push(...c):L(c),e.$$.on_mount=[]}),n.forEach(I)}function de(e,u){const t=e.$$;t.fragment!==null&&(oe(t.after_update),L(t.on_destroy),t.fragment&&t.fragment.d(u),t.on_destroy=t.fragment=null,t.ctx=[])}function fe(e,u){e.$$.dirty[0]===-1&&(x.push(e),re(),e.$$.dirty.fill(0)),e.$$.dirty[u/31|0]|=1<<u%31}function he(e,u,t,i,n,c,h=null,y=[-1]){const v=T;M(e);const o=e.$$={fragment:null,ctx:[],props:c,update:A,not_equal:n,bound:P(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u.context||(v?v.$$.context:[])),callbacks:P(),dirty:y,skip_bound:!1,root:u.target||v.$$.root};h&&h(o.root);let E=!1;if(o.ctx=t?t(e,u.props||{},(p,s,...l)=>{const r=l.length?l[0]:s;return o.ctx&&n(o.ctx[p],o.ctx[p]=r)&&(!o.skip_bound&&o.bound[p]&&o.bound[p](r),E&&fe(e,p)),s}):[],o.update(),E=!0,L(o.before_update),o.fragment=i?i(o.ctx):!1,u.target){if(u.hydrate){const p=ue(u.target);o.fragment&&o.fragment.l(p),p.forEach(N)}else o.fragment&&o.fragment.c();u.intro&&le(e.$$.fragment),ae(e,u.target,u.anchor),W()}M(v)}class me{constructor(){C(this,"$$");C(this,"$$set")}$destroy(){de(this,1),this.$destroy=A}$on(u,t){if(!K(t))return A;const i=this.$$.callbacks[u]||(this.$$.callbacks[u]=[]);return i.push(t),()=>{const n=i.indexOf(t);n!==-1&&i.splice(n,1)}}$set(u){this.$$set&&!Z(u)&&(this.$$.skip_bound=!0,this.$$set(u),this.$$.skip_bound=!1)}}const ge="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ge);function G(e,u,t){const i=e.slice();return i[11]=u[t],i}function q(e){let u,t,i,n,c,h=e[11].label+"",y,v,o,E,p;return{c(){u=_("div"),t=_("div"),i=_("img"),c=b(),y=V(h),v=b(),o=_("div"),E=_("div"),p=b(),Y(i.src,n=`icons/${e[11].id}.png`)||g(i,"src",n),g(i,"alt",e[11].label),g(i,"class","icon"),g(t,"class","parameter-label"),g(E,"class","progress"),g(E,"id",e[11].id),g(o,"class","progress-bar"),g(u,"class","parameter")},m(s,l){U(s,u,l),d(u,t),d(t,i),d(t,c),d(t,y),d(u,v),d(u,o),d(o,E),d(u,p)},p:A,d(s){s&&N(u)}}}function pe(e){let u,t,i,n,c,h,y,v,o,E,p,s,l,r,$=R(e[0]),a=[];for(let f=0;f<$.length;f+=1)a[f]=q(G(e,$,f));return{c(){u=_("div"),t=_("header"),t.innerHTML="<h1>Teacher Life Game</h1>",i=b(),n=_("div");for(let f=0;f<a.length;f+=1)a[f].c();c=b(),h=_("div"),h.innerHTML='<div id="situation" class="situation"></div>',y=b(),v=_("div"),o=b(),E=_("div"),E.innerHTML='<div id="score">Счет: 0</div>',p=b(),s=_("div"),l=b(),r=_("div"),r.innerHTML='<div class="overall-label">Общая оценка</div> <div class="overall-bar"><div class="overall-progress" id="overall-bar"></div></div>',g(n,"class","parameters"),g(h,"class","card"),g(v,"class","actions"),g(v,"id","actions"),g(E,"class","status"),g(s,"id","warnings"),g(s,"class","warnings"),g(r,"class","overall-container"),g(u,"id","app")},m(f,w){U(f,u,w),d(u,t),d(u,i),d(u,n);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(n,null);d(u,c),d(u,h),d(u,y),d(u,v),d(u,o),d(u,E),d(u,p),d(u,s),d(u,l),d(u,r)},p(f,[w]){if(w&1){$=R(f[0]);let m;for(m=0;m<$.length;m+=1){const j=G(f,$,m);a[m]?a[m].p(j,w):(a[m]=q(j),a[m].c(),a[m].m(n,null))}for(;m<a.length;m+=1)a[m].d(1);a.length=$.length}},i:A,o:A,d(f){f&&N(u),ee(a,f)}}}function ve(e){const u=document.getElementById("warnings");u.innerHTML="";const t=document.createElement("div");t.className="end-game",t.innerText=`Игра окончена! ${e}`,u.appendChild(t)}function Ee(e){let u=[],t=[],i=0;const n=[{label:"Администрация",id:"administration",value:10,message:"Вы уволены!",warn:"Вы на грани увольнения!"},{label:"Коллеги",id:"colleagues",value:10,message:"Профсоюз добился Вашего увольнения!",warn:"Отношения в коллективе напряженные."},{label:"Родители",id:"parents",value:10,message:"Родители устроили скандал в школе.",warn:"Родители недовольны Вашей работой."},{label:"Ученики",id:"students",value:10,message:"Ученики устроили бунт.",warn:"Ученики жалуются на Вас."},{label:"Свободное время",id:"freeTime",value:10,message:"Вы выгорели.",warn:"Вы перерабатываете."}];function c(){const s=Math.floor(Math.random()*u.length);return u[s]}function h(s){document.getElementById("situation").innerText=`Ситуация: ${s.description}`;const l=document.getElementById("actions");l.innerHTML="",s.actions.forEach((r,$)=>{const a=document.createElement("button");a.innerText=r.description,a.onclick=()=>p(r),l.appendChild(a)}),y()}function y(){n.forEach(l=>{const r=document.getElementById(l.id);r&&(r.style.height=l.value*10+"%")}),document.getElementById("score").innerText=`Счет: ${i}`;const s=v();document.getElementById("overall-bar").style.width=s+"%"}function v(){const l=n.reduce((f,w)=>f+w.value,0),r=n.reduce((f,w)=>f+1/w.value,0)*10,$=l/50*100,a=Math.max(0,100-$-r);return Math.min(100,$-a)}function o(){const s=document.getElementById("warnings");s.innerHTML="",n.forEach(l=>{if(l.value<=2){const r=document.createElement("div");r.className="warning",r.innerText=l.warn,s.appendChild(r)}})}function E(){const s=n.find(l=>l.value<=0);return s?(ve(s.message),!0):!1}function p(s){if(n.forEach(r=>{r.value=Math.min(10,r.value+s.effects[r.id])}),E())return;o(),i++;const l=t.find(r=>i%r.interval===0);if(l)h(l);else{const r=c();h(r)}}return ne(async()=>{u=await(await fetch("/situations.json")).json(),t=await(await fetch("/fixedEvents.json")).json();const r=c();h(r),y()}),[n]}class _e extends me{constructor(u){super(),he(this,u,Ee,pe,X,{})}}new _e({target:document.body,props:{}});
