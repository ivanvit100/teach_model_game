var te=Object.defineProperty;var ne=(e,t,n)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var B=(e,t,n)=>ne(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();function N(){}function Q(e){return e()}function q(){return Object.create(null)}function k(e){e.forEach(Q)}function X(e){return typeof e=="function"}function ie(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let A;function F(e,t){return e===t?!0:(A||(A=document.createElement("a")),A.href=t,e===A.href)}function re(e){return Object.keys(e).length===0}function d(e,t){e.appendChild(t)}function Y(e,t,n){e.insertBefore(t,n||null)}function D(e){e.parentNode&&e.parentNode.removeChild(e)}function oe(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function y(e){return document.createElement(e)}function I(e){return document.createTextNode(e)}function M(){return I(" ")}function m(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function se(e){return Array.from(e.childNodes)}function Z(e,t){t=""+t,e.data!==t&&(e.data=t)}function z(e,t,n,i){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,"")}let P;function j(e){P=e}function le(){if(!P)throw new Error("Function called outside component initialization");return P}function ce(e){le().$$.on_mount.push(e)}const S=[],K=[];let O=[];const U=[],ae=Promise.resolve();let R=!1;function ue(){R||(R=!0,ae.then(ee))}function H(e){O.push(e)}const C=new Set;let L=0;function ee(){if(L!==0)return;const e=P;do{try{for(;L<S.length;){const t=S[L];L++,j(t),de(t.$$)}}catch(t){throw S.length=0,L=0,t}for(j(null),S.length=0,L=0;K.length;)K.pop()();for(let t=0;t<O.length;t+=1){const n=O[t];C.has(n)||(C.add(n),n())}O.length=0}while(S.length);for(;U.length;)U.pop()();R=!1,C.clear(),j(e)}function de(e){if(e.fragment!==null){e.update(),k(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(H)}}function fe(e){const t=[],n=[];O.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),O=t}const he=new Set;function me(e,t){e&&e.i&&(he.delete(e),e.i(t))}function V(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function pe(e,t,n){const{fragment:i,after_update:r}=e.$$;i&&i.m(t,n),H(()=>{const l=e.$$.on_mount.map(Q).filter(X);e.$$.on_destroy?e.$$.on_destroy.push(...l):k(l),e.$$.on_mount=[]}),r.forEach(H)}function ge(e,t){const n=e.$$;n.fragment!==null&&(fe(n.after_update),k(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ve(e,t){e.$$.dirty[0]===-1&&(S.push(e),ue(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function _e(e,t,n,i,r,l,f=null,$=[-1]){const g=P;j(e);const c=e.$$={fragment:null,ctx:[],props:l,update:N,not_equal:r,bound:q(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(g?g.$$.context:[])),callbacks:q(),dirty:$,skip_bound:!1,root:t.target||g.$$.root};f&&f(c.root);let _=!1;if(c.ctx=n?n(e,t.props||{},(a,b,...E)=>{const o=E.length?E[0]:b;return c.ctx&&r(c.ctx[a],c.ctx[a]=o)&&(!c.skip_bound&&c.bound[a]&&c.bound[a](o),_&&ve(e,a)),b}):[],c.update(),_=!0,k(c.before_update),c.fragment=i?i(c.ctx):!1,t.target){if(t.hydrate){const a=se(t.target);c.fragment&&c.fragment.l(a),a.forEach(D)}else c.fragment&&c.fragment.c();t.intro&&me(e.$$.fragment),pe(e,t.target,t.anchor),ee()}j(g)}class ye{constructor(){B(this,"$$");B(this,"$$set")}$destroy(){ge(this,1),this.$destroy=N}$on(t,n){if(!X(n))return N;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!re(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const $e="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add($e);function W(e,t,n){const i=e.slice();return i[11]=t[n],i}function J(e){let t,n,i,r,l,f,$=e[11].label+"",g,c,_,a,b,E;return{c(){t=y("div"),n=y("div"),i=y("img"),f=M(),g=I($),c=M(),_=y("div"),a=y("div"),E=M(),F(i.src,r=`icons/${e[11].id}.png`)||m(i,"src",r),m(i,"alt",l=e[11].label),m(i,"class","icon"),m(n,"class","parameter-label"),m(a,"class","progress"),z(a,"background-color",e[11].color),m(a,"id",b=e[11].id),m(_,"class","progress-bar"),m(t,"class","parameter")},m(o,s){Y(o,t,s),d(t,n),d(n,i),d(n,f),d(n,g),d(t,c),d(t,_),d(_,a),d(t,E)},p(o,s){s&2&&!F(i.src,r=`icons/${o[11].id}.png`)&&m(i,"src",r),s&2&&l!==(l=o[11].label)&&m(i,"alt",l),s&2&&$!==($=o[11].label+"")&&Z(g,$),s&2&&z(a,"background-color",o[11].color),s&2&&b!==(b=o[11].id)&&m(a,"id",b)},d(o){o&&D(t)}}}function be(e){let t,n,i,r,l,f,$,g,c,_,a,b,E,o,s,u,x,w=V(e[1]),p=[];for(let h=0;h<w.length;h+=1)p[h]=J(W(e,w,h));return{c(){t=y("div"),n=y("header"),n.innerHTML="<h1>Teacher Life Game</h1>",i=M(),r=y("div");for(let h=0;h<p.length;h+=1)p[h].c();l=M(),f=y("div"),f.innerHTML='<div id="situation" class="situation"></div>',$=M(),g=y("div"),c=M(),_=y("div"),a=y("div"),b=I("Счет: "),E=I(e[0]),o=M(),s=y("div"),u=M(),x=y("div"),x.innerHTML='<div class="overall-label">Общая оценка</div> <div class="overall-bar"><div class="overall-progress" id="overall-bar"></div></div>',m(r,"class","parameters"),m(f,"class","card"),m(g,"class","actions"),m(g,"id","actions"),m(a,"id","score"),m(_,"class","status"),m(s,"id","warnings"),m(s,"class","warnings"),m(x,"class","overall-container"),m(t,"id","app")},m(h,T){Y(h,t,T),d(t,n),d(t,i),d(t,r);for(let v=0;v<p.length;v+=1)p[v]&&p[v].m(r,null);d(t,l),d(t,f),d(t,$),d(t,g),d(t,c),d(t,_),d(_,a),d(a,b),d(a,E),d(t,o),d(t,s),d(t,u),d(t,x)},p(h,[T]){if(T&2){w=V(h[1]);let v;for(v=0;v<w.length;v+=1){const G=W(h,w,v);p[v]?p[v].p(G,T):(p[v]=J(G),p[v].c(),p[v].m(r,null))}for(;v<p.length;v+=1)p[v].d(1);p.length=w.length}T&1&&Z(E,h[0])},i:N,o:N,d(h){h&&D(t),oe(p,h)}}}function we(e){const t=document.getElementById("warnings");t.innerHTML="";const n=document.createElement("div");n.className="end-game",n.innerText=`Игра окончена! ${e}`,t.appendChild(n)}function Ee(e,t,n){let i=0,r=[],l=[],f=[];function $(){const o=Math.floor(Math.random()*r.length);return r[o]}function g(o){document.getElementById("situation").innerText=`Ситуация: ${o.description}`;const s=document.getElementById("actions");s.innerHTML="",o.actions.forEach((u,x)=>{const w=document.createElement("button");w.innerText=u.description,w.onclick=()=>E(u),s.appendChild(w)}),c()}function c(){f.forEach(s=>{const u=document.getElementById(s.id);u&&(u.style.height=s.value*10+"%")});const o=_();document.getElementById("overall-bar").style.width=o+"%"}function _(){const s=f.reduce((p,h)=>p+h.value,0),u=f.reduce((p,h)=>p+1/h.value,0)*10,x=s/50*100,w=Math.max(0,100-x-u);return Math.min(100,x-w)}function a(){const o=document.getElementById("warnings");o.innerHTML="",f.forEach(s=>{if(s.value<=2){const u=document.createElement("div");u.className="warning",u.innerText=s.warn,o.appendChild(u)}})}function b(){const o=f.find(s=>s.value<=0);return o?(we(o.message),!0):!1}function E(o){if(f.forEach(u=>{u.value=Math.min(10,u.value+o.effects[u.id])}),b())return;a(),n(0,i++,i);const s=l.find(u=>i%u.interval===0);if(s)g(s);else{const u=$();g(u)}}return ce(async()=>{r=await(await fetch("/situations.json")).json(),l=await(await fetch("/fixedEvents.json")).json();const u=await fetch("/parameters.json");n(1,f=await u.json());const x=$();g(x),c()}),[i,f]}class xe extends ye{constructor(t){super(),_e(this,t,Ee,be,ie,{})}}new xe({target:document.body,props:{}});
